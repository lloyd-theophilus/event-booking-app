# App configuration
app:
  name: event-booking-app

# Deployment configuration
deployment:
  name: python-deployment-staging  # Matches your existing deployment
  replicaCount: 3
  namespace: staging  # Will be overridden by helm install -n

# Image configuration
image:
  repository: 586794478801.dkr.ecr.eu-west-2.amazonaws.com/python-flask-deployment  # Note typo in "deplyment"
  tag: "${TAG}"  # Latest tag from your logs
  pullPolicy: IfNotPresent
  pullSecrets:
    - name: ecr-secret  # Adjust if needed

# Resource configuration
resources:
  limits:
    cpu: "800m"
    memory: "3Gi"  # Increased from 512Mi to fix memory crash
  requests:
    cpu: "500m"
    memory: "256Mi"

# Environment variables
env:
  DATABASE_HOST: "event-booking-staging-db.c58os0ickbei.eu-west-2.rds.amazonaws.com"
  DATABASE_PORT: "5432"
  DATABASE_NAME: "event-booking-staging-db"
  DATABASE_USER:
    valueFrom:
      secretKeyRef:
        name: event-booking-staging-db
        key: username
  DATABASE_PASSWORD:
    valueFrom:
      secretKeyRef:
        name: event-booking-staging-db
        key: password

# Security context (example, adjust as needed)
securityContext: {}

# Rolling update strategy
rollingUpdate:
  maxSurge: 25%
  maxUnavailable: 25%

# Service configuration
service:
  name: event-booking-app
  type: LoadBalancer
  port: 80
  targetPort: 3000
  selector:
    app: event-booking-app

# Ingress configuration
ingress:
  enabled: true
  className: "nginx"  # Changed from "alb"
  annotations: {}  # Remove ALB-specific annotations
  hosts:
    - host: staging.kellerbeam.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

